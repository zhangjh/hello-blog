<!doctype html><html class="theme-next use-motion"><head><meta name=generator content="Hexo 3.8.0"><meta charset=UTF-8><meta http-equiv=Content-Language content=zh-CN><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1"><meta http-equiv=Cache-Control content=no-transform><meta http-equiv=Cache-Control content=no-siteapp><meta http-equiv=Cache-Control content="max-age=864000"><meta name=google-site-verification content=4uI2zlyLHcOQWwwZFmW5SB6dj9mlInB8lIUfeM_L8d8><meta name=baidu_union_verify content=9f6bc0068b476b9afebdb405dbd92112><link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel=stylesheet type=text/css><link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel=stylesheet type=text/css><link href="/css/main.css?v=1.0.0.0" rel=stylesheet type=text/css><link rel=canonical href=https://zhangjh.me><meta name=keywords content="Hexo,dante notes,但丁笔记,git,javascript,技术人生"><link rel=alternate href=/rss2.xml title=但丁笔记 type=application/atom+xml><link rel="shortcut icon" type=image/x-icon href="/favicon.ico?v=1.0.0.0"><meta name=description content="一个伪文青，一个low geek 孤单的坚持码字"><meta property=og:type content=website><meta property=og:title content=但丁笔记><meta property=og:url content=http://zhangjh.me/page/5/index.html><meta property=og:site_name content=但丁笔记><meta property=og:description content="一个伪文青，一个low geek 孤单的坚持码字"><meta property=og:locale content=zh-Hans><meta name=twitter:card content=summary><meta name=twitter:title content=但丁笔记><meta name=twitter:description content="一个伪文青，一个low geek 孤单的坚持码字"><script type=text/javascript id=hexo.configuration>
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'hide',
    motion: true
  };
</script><script type=text/javascript src="/vendors/jquery/index.js?v=2.1.3"></script><title>但丁笔记 --一个理想主义文青的IT自留地</title><style>
    #msg-tip {
      background-color: orangered;
      color: white;
      position: fixed;
      top: 50px;
      right: 10px;
      z-index: 2;
      display: none;
      cursor: pointer;
    }
    #msg-modal {
      position: fixed;
      top: 20%;
      left: 50%;
      width: 400px;
      margin-left: -200px;
      z-index: 2;
      -webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, .5);
      -moz-box-shadow: 0 5px 15px rgba(0, 0, 0, .5);
      box-shadow: 0 5px 15px rgba(0, 0, 0, .5);
      padding: 5px 20px;
      background: white;
      display: none;
    }
    #msg-modal h5 {
      float: left;
    }
    #msg-modal .close {
      float: right;
    }
    #modal-body {
      clear: both;
    }
    #modal-body .item a {
      color: #219bde;
    }
  </style></head><body><div id=msg-tip>❗️你有<span>0</span>条未读消息</div><div id=msg-modal><div id=modal-header><h5>消息列表</h5><span class=close>X</span></div><div id=modal-body></div></div><div class="container one-column page-home"><div class=headband></div><header id=header class=header><div class=header-inner><div class=site-meta><div class=custom-logo-site-title><a href="/" class=brand rel=start><span class=logo-line-before><i></i></span> <span class=site-title>但丁笔记</span> <span class=logo-line-after><i></i></span></a></div><p class=site-subtitle></p></div><div class=site-nav-toggle><button><span class=btn-bar></span> <span class=btn-bar></span> <span class=btn-bar></span></button></div><nav class=site-nav><ul id=menu class="menu menu-left"><li class="menu-item menu-item-home"><a href="/" rel=section><i class="menu-item-icon fa fa-home fa-fw"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href=/categories rel=section><i class="menu-item-icon fa fa-th fa-fw"></i><br>分类</a></li><li class="menu-item menu-item-about"><a href=/about rel=section><i class="menu-item-icon fa fa-user fa-fw"></i><br>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives rel=section><i class="menu-item-icon fa fa-archive fa-fw"></i><br>归档</a></li><li class="menu-item menu-item-tags"><a href=/tags rel=section><i class="menu-item-icon fa fa-tags fa-fw"></i><br>标签</a></li><li class="menu-item menu-item-search"><a href=/search rel=section><i class="menu-item-icon fa fa-question-circle fa-fw"></i><br>搜索</a></li><li class="menu-item menu-item-commonweal"><a href=/404 rel=section style="font-weight: bold"><i class="menu-item-icon fa fa-heartbeat fa-fw"></i><br>公益404</a></li></ul><div class=site-search><form class=site-search-form target=_blank action=http://zhannei.baidu.com/cse/site><input type=text name=q size=30 placeholder=站内搜索> <input type=hidden name=cc value=zhangjh.me></form></div></nav></div></header><main id=main class=main><div class=main-inner><div id=content class=content><section id=posts class=posts-expand><article class="post post-type-normal" itemscope itemtype=//schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href="/2016/06/17/node-crypto/" itemprop=url>nodejs使用crypto进行加密/解密操作</a></h1><div class=post-meta><span class=post-time>发表于<time itemprop=dateCreated datetime=2016-06-17T15:00:18+08:00 content=2016-06-17>2016-06-17</time></span> <span class=post-category>&nbsp; | &nbsp; 分类于 <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/技术人生/" itemprop=url rel=index><span itemprop=name>技术人生</span></a></span></span></div></header><div class=post-body><span itemprop=articleBody><h4 id=背景><a href=#背景 class=headerlink title=背景></a>背景</h4><p>前面博文总结了<a href=http://favlink.me target=_blank rel=noopener>favlink</a>的用户登录验证系统。说到登录验证那必然少不了用户名、密码的验证过程，而密码的操作也离不开加密，解密，毕竟不能明文存储吧！本篇就简单总结一下favlink开发过程中用到的nodejs加解密库。</p><h4 id=crypto简介><a href=#crypto简介 class=headerlink title=crypto简介></a>crypto简介</h4><p><a href=http://nodejs.org/api/crypto.html target=_blank rel=noopener>Crypto</a>是包含在nodejs内核中的，主要提供加密、解密、签名、验证等功能。利用了OpenSSL来实现其加密技术。</p><h4 id=使用方式><a href=#使用方式 class=headerlink title=使用方式></a>使用方式</h4><figure class="highlight php"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>var</span> crypto = <span class=keyword>require</span>(<span class=string>'crypto'</span>);</span><br><span class=line><span class=comment>//加密</span></span><br><span class=line><span class=function><span class=keyword>function</span> <span class=title>encrypt</span><span class=params>(str,secret)</span></span>&#123;</span><br><span class=line>	<span class=keyword>var</span> cipher = crypto.createCipher(<span class=string>'aes192'</span>,secret);</span><br><span class=line>	<span class=keyword>var</span> enc = cipher.update(str,<span class=string>'utf8'</span>,<span class=string>'hex'</span>);</span><br><span class=line>	enc += cipher.<span class=keyword>final</span>(<span class=string>'hex'</span>);</span><br><span class=line></span><br><span class=line>	<span class=keyword>return</span> enc;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=comment>//解密</span></span><br><span class=line><span class=function><span class=keyword>function</span> <span class=title>decrypt</span><span class=params>(str,secret)</span></span>&#123;</span><br><span class=line>	<span class=keyword>var</span> decipher = crypto.createDecipher(<span class=string>'aes192'</span>,secret);</span><br><span class=line>	<span class=keyword>var</span> dec = decipher.update(str,<span class=string>'hex'</span>,<span class=string>'utf8'</span>);</span><br><span class=line>	dec += decipher.<span class=keyword>final</span>(<span class=string>'utf8'</span>);</span><br><span class=line>	<span class=keyword>return</span> dec;</span><br><span class=line>&#125;</span><br></pre></td></tr></table></figure><ul><li><p>我们先来看加密操作。<br><code>crypto.createCipher(algo,pwd)</code>,该函数接收两个参数，一个加密算法，一个密钥字串，返回一个’Cipher’对象。<br>加密算法有很多种，我这里使用的是’aes192’，可以运行下面的代码查看所有支持的算法：</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>var</span> crypto = <span class=built_in>require</span>(<span class=string>'crypto'</span>);</span><br><span class=line><span class=built_in>console</span>.log(crypto.getCiphers());</span><br></pre></td></tr></table></figure><p><code>cipher.update(data[,input_encoding][,output_encoding])</code>,该函数可接收三个参数，编码可选(输入只能是<code>&#39;utf8&#39;,&#39;ascii&#39;,&#39;binary&#39;</code>之一，输出只能是<code>&#39;binary&#39;,&#39;base64&#39;,&#39;hex&#39;</code>)，返回指定编码后的加密数据，如果编码缺省，则返回<code>buffer</code>类型。<br><code>cipher.update()</code>可以运行多次，但只能在<code>cipher.final()</code>之前运行。<br><code>cipher.final(output_encoding)</code>,返回指定编码的加密字串。</p></li><li><p>解密操作<br>解密操作类似，首先先定义解密用<code>decipher</code>对象，保持和加密所用的密钥、加密算法一致；<br>然后使用decipher将加密字串解密即可。</p></li></ul><h4 id=示例><a href=#示例 class=headerlink title=示例></a>示例</h4><ol><li><p>加密</p><figure class="highlight less"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=selector-tag>encrypt</span>(<span class=string>"helloworld"</span>,<span class=string>"weird sheep"</span>);</span><br><span class=line><span class=comment>//Output: faf46f87e8befb82bc643805cfd753a6</span></span><br></pre></td></tr></table></figure></li><li><p>解密</p><figure class="highlight less"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=selector-tag>decrypt</span>(<span class=string>"faf46f87e8befb82bc643805cfd753a6"</span>,<span class=string>"weird sheep"</span>);</span><br><span class=line><span class=comment>//Output: helloworld</span></span><br></pre></td></tr></table></figure></li></ol></span></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=//schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href="/2016/06/16/myreading-2016/" itemprop=url>我的阅读-2016</a></h1><div class=post-meta><span class=post-time>发表于<time itemprop=dateCreated datetime=2016-06-16T15:19:30+08:00 content=2016-06-16>2016-06-16</time></span> <span class=post-category>&nbsp; | &nbsp; 分类于 <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/阅历/" itemprop=url rel=index><span itemprop=name>阅历</span></a></span></span></div></header><div class=post-body><h1 id=在读><a href=#在读 class=headerlink title=在读></a>在读</h1><h1 id=已读><a href=#已读 class=headerlink title=已读></a>已读</h1><p><a class=fancybox rel=noopener href="https://www.amazon.cn/gp/product/B019C5Y1Z8/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B019C5Y1Z8&linkCode=as2&tag=dante-23" target=_blank><br><img src=https://images-cn-4.ssl-images-amazon.com/images/I/51RVgZLRptL._SY346_.jpg alt=指数基金投资指南><br></a></p><blockquote><p>年过而立，是时候该考虑如何理财了。去年在大牛市时踏入股市，亏了个屁滚尿流。懵懵懂懂中接受了风险教育，实战中的教训给我这个小白上了结结实实的一课。如今对资本市场已经不再是”初生牛犊不怕虎”，充满敬畏之心的我开始思考从理论上补充知识。这是我近期完整读完的一本有关指数基金理财的书，书中介绍了指数基金的基本知识并结合实例说明了如何进行指数基金定投。由于基础知识的缺乏，部分内容如定投计划的制定看的并不太明白。总体说这本指数基金定投入门电子书还是不错的。</p></blockquote><p><a class=fancybox rel=noopener href="https://www.amazon.cn/gp/search/ref=as_li_qf_sp_sr_tl?ie=UTF8&camp=536&creative=3200&index=aps&keywords=%E5%A4%A9%E6%9C%9D%E5%B4%9B%E8%B5%B7&linkCode=ur2&tag=dante-23" target=_blank><br><img src=https://images-cn.ssl-images-amazon.com/images/I/41nyAcVvv3L.jpg alt=天朝崛起><br></a></p><blockquote><p>内容及写法都一般吧，看书名还以为是写”本朝”的崛起经历，由于是在百度阅读上下载的也没细看就下了。看了内容才发现这是一本有关历代封建王朝的兴衰简史。流水账式的叙述了王朝的兴起背景、王朝盛兴的过程及统治策略、王朝的特点。比较适合对中国史已经比较了解的看看，宏观上纵览下整个封建时代的王朝兴衰。</p></blockquote><p><a class=fancybox rel=noopener href="http://www.amazon.cn/gp/product/B00VWVAFAG/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B00VWVAFAG&linkCode=as2&tag=dante-23" target=_blank><br><img src=https://img3.doubanio.com/lpic/s28049685.jpg alt=岛上书店><br></a></p><blockquote><p>“我告诉你，生活中每一桩糟糕的事，几乎都是时机不当的结果。每件好事，都是时机恰到好处的结果。” – 兰比亚斯<br>“我们读书而后知道自己并不孤单。我们读书，因为我们孤单；我们读书，然后就不孤单，我们并不孤单。” – A.J.F<br>羡慕A.J.F拥有阿米莉亚这样志趣相投的灵魂伴侣，即使最后作者还是安排了他病死。我想大家都会羡慕的吧~</p></blockquote><p><a class=fancybox rel=noopener href="http://www.amazon.cn/gp/product/B00Z5S4EDG/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B00Z5S4EDG&linkCode=as2&tag=dante-23" target=_blank><br><img src=https://img1.doubanio.com/lpic/s28123969.jpg alt=消失的地平线><br></a></p><blockquote><p>很久没读书，熬夜看完了这本著名的乌托邦小说。然而跟很多看完”深受震动”的人的观感不一的是，我却并没有这般感受，甚至觉得有些许的”价值观扭曲和强加”之感。主人公一行”误入”香格里拉，其背后的真相竟然是”亦基督亦佛”的大喇嘛们寻找香格里拉继承人的一番”阴谋”，正如马连森说的一样，”这和织网的蜘蛛布下的陷阱有何区别”？而理想国度里的”长生不老”我想并不是所有人的理想目标，这个世界，有淡然的康韦，也有急躁的马连森，在如今这个多元化的世界里，并不能说慢节奏的闲适生活就比快节奏的忙碌生活高明多少，重要的是每个人的自由选择。反正在我看来，”无所事事”的”长生不老”并不是那么有吸引力。”任何人类的情感敌不过五年的分离”，我想这样的闲适和淡定的源头不是真正的”入定”，大抵是一种类似”心死”的苦闷吧？那些不是那么主动愿意留在香格里拉的人们，如马连森和洛岑，即使拥有了长生不老，香格里拉是他们的理想国吗？</p></blockquote><p><a class=fancybox rel=noopener href="http://www.amazon.cn/gp/product/B0098SGXLK/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B0098SGXLK&linkCode=as2&tag=dante-23" target=_blank><br><img src=https://img3.doubanio.com/lpic/s27279654.jpg alt=活着><br></a></p><blockquote><p>很早就知道余华以及他的《活着》，困顿的青少年时代买不起的书只有现在补上。余华在这本书里以冷静地近乎残忍的笔调描写了一个无比绝望而又无比坚强的”活着”故事。再一次让我叩问活着的意义。”人是为了活着本身而活着的，而不是为了活着之外的任何事物而活着”。福贵的苦难也是那个时代中国人的苦难的缩影，在命运的洪流面前个人的力量好像真的很渺小。童年也曾经历了一段艰难而困苦的日子，每每看到这些苦难的经历和故事，总难免不了一些唏嘘感叹下的泪湿眼眶。</p></blockquote><p><a class=fancybox rel=noopener href="http://www.amazon.cn/gp/product/B00JVLEYY2/ref=as_li_tf_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B00JVLEYY2&linkCode=as2&tag=dante-23" target=_blank><br><img src=https://img1.doubanio.com/lpic/s26700273.jpg alt=javascript异步编程><br></a></p><blockquote><p>目前看过最好的一本技术翻译书，没有翻译腔，技术表达也比较到位，让人很有阅读欲，文字描述甚至可以说很有文采。</p></blockquote><div class="post-more-link text-center"><a class=btn href="/2016/06/16/myreading-2016/" rel=contents>阅读全文 &raquo;</a></div></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=//schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href="/2016/06/08/node-authority/" itemprop=url>Nodejs使用session、cookie进行登录验证功能的实现</a></h1><div class=post-meta><span class=post-time>发表于<time itemprop=dateCreated datetime=2016-06-08T13:23:32+08:00 content=2016-06-08>2016-06-08</time></span> <span class=post-category>&nbsp; | &nbsp; 分类于 <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/技术人生/" itemprop=url rel=index><span itemprop=name>技术人生</span></a></span></span></div></header><div class=post-body><h4 id=背景><a href=#背景 class=headerlink title=背景></a>背景</h4><p>我在业余开发了一个<a href=http://favlink.me target=_blank rel=noopener><strong>藏经阁</strong></a>项目，它是一个完全针对用户定制化的网址收藏导航网站。因此用户注册和登录验证就成了最基本的需求和问题。<br>藏经阁使用了<code>Node Express</code>框架进行开发，因此本篇简单总结一下Node使用session和cookie进行登录以及权限验证的过程。</p><h4 id=Cookie和Session><a href=#Cookie和Session class=headerlink title=Cookie和Session></a>Cookie和Session</h4><p>首先我们先来了解一下登录验证的原理。</p><p>众所周知，HTTP是一个无状态协议，所以客户端每次发出请求时，下一次请求无法得知上一次请求所包含的状态数据，如何能把一个用户的状态数据关联起来呢？</p><p>比如在淘宝的某个页面中，你进行了登录操作，当你跳转到商品页时，服务端如何知道你是已经登录的状态？</p><h5 id=Cookie><a href=#Cookie class=headerlink title=Cookie></a>Cookie</h5><p>首先产生了Cookie这门技术。Cookie是http协议的一部分，它的处理分为几步：</p><ol><li>服务端向客户端发送cookie</li><li>浏览器保存cookie</li><li>每次请求浏览器都将cookie发送给服务器</li></ol><p>cookie虽然很方便，但存在一个很大的弊端，就是cookie中的数据可以在客户端被修改，这就存在很大的风险隐患。恶意用户可能会通过伪造cookie来假冒别人登录。<br>为了解决这个问题，就产生了Session。</p><h5 id=Session><a href=#Session class=headerlink title=Session></a>Session</h5><p>Session的数据是保留在服务器端的，session的运作通过一个<code>session_id</code>来进行。session_id通常存在cookie中，在express中，默认是<code>connect.sid</code>这个字段。当请求到来时，服务端检查cookie中保存的session_id，并通过session_id与服务器端的session数据关联起来。</p><p>因此，当你访问网页时，服务端随机产生了一个1024比特的字符串存在客户端的cookie中。当你下次访问时，cookie会带有这个字段，然后浏览器就知道你是上次访问过的某某啦。由于session数据是存储在服务器的，并且session_id是随机产生的，位数也足够多，所以也不用担心被人伪造。伪造的成功率比坐在电脑前写代码被突然天降的流星砸死的概率还低。</p><div class="post-more-link text-center"><a class=btn href="/2016/06/08/node-authority/" rel=contents>阅读全文 &raquo;</a></div></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=//schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href="/2016/06/08/mongodb-back-restore/" itemprop=url>mongodb数据备份与恢复</a></h1><div class=post-meta><span class=post-time>发表于<time itemprop=dateCreated datetime=2016-06-08T12:45:22+08:00 content=2016-06-08>2016-06-08</time></span> <span class=post-category>&nbsp; | &nbsp; 分类于 <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/技术人生/" itemprop=url rel=index><span itemprop=name>技术人生</span></a></span></span></div></header><div class=post-body><h4 id=MongoDB数据备份><a href=#MongoDB数据备份 class=headerlink title=MongoDB数据备份></a>MongoDB数据备份</h4><h5 id=1-语法><a href=#1-语法 class=headerlink title="1. 语法"></a>1. 语法</h5><figure class="highlight ebnf"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line><span class=attribute>mongodump -h dbhost -d dbname -c collection -o dbdirectory</span></span><br></pre></td></tr></table></figure><ul><li>-h: mongodb所在服务器地址</li><li>-d: 需要备份的数据库实例名称，如test，如果不指定将备份所有的数据库</li><li>-c: 指定需要备份的数据表，如果不指定备份所有collection</li><li>-o: 数据备份存放的路径，如不存在需要提前建立，如：./backup，备份完成后备份数据会被存放在./backup/test</li></ul><h5 id=2-示例><a href=#2-示例 class=headerlink title="2. 示例"></a>2. 示例</h5><figure class="highlight jboss-cli"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>mongodump -d favlink -o <span class=string>./favlinks</span></span><br></pre></td></tr></table></figure><p>上述命令将本地数据库的favlink实例备份到当前路径的favlinks目录下，备份完成后的数据如图显示：<br><img src=http://ww4.sinaimg.cn/mw690/62d95157gw1f4nqfens68j20np01ydg6.jpg></p><div class="post-more-link text-center"><a class=btn href="/2016/06/08/mongodb-back-restore/" rel=contents>阅读全文 &raquo;</a></div></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=//schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href="/2016/05/21/aria2-transmission/" itemprop=url>[备忘]下载器aria2 & transmission安装配置以及开启web控制</a></h1><div class=post-meta><span class=post-time>发表于<time itemprop=dateCreated datetime=2016-05-21T19:46:41+08:00 content=2016-05-21>2016-05-21</time></span> <span class=post-category>&nbsp; | &nbsp; 分类于 <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/技术人生/" itemprop=url rel=index><span itemprop=name>技术人生</span></a></span></span></div></header><div class=post-body><p>树莓派使用了aria2和transmission来作为下载器，虽然网上已经有很多的相关安装和配置教程，但为了不用需要的时候再上网搜索，此处简单记录下相关的操作。</p><h5 id=aria2><a href=#aria2 class=headerlink title=aria2></a>aria2</h5><ol><li><p>安装</p><figure class="highlight routeros"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>sudo apt-<span class=builtin-name>get</span> install aria2</span><br></pre></td></tr></table></figure></li><li><p>配置<br>我的配置供参考</p></li></ol><div class="post-more-link text-center"><a class=btn href="/2016/05/21/aria2-transmission/" rel=contents>阅读全文 &raquo;</a></div></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=//schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href="/2016/04/12/hexo-visit-analytics-md/" itemprop=url>给hexo博客文章添加阅读次数统计</a></h1><div class=post-meta><span class=post-time>发表于<time itemprop=dateCreated datetime=2016-04-12T13:38:49+08:00 content=2016-04-12>2016-04-12</time></span> <span class=post-category>&nbsp; | &nbsp; 分类于 <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/技术人生/" itemprop=url rel=index><span itemprop=name>技术人生</span></a></span></span></div></header><div class=post-body><h4 id=背景><a href=#背景 class=headerlink title=背景></a>背景</h4><p>Hexo作为纯静态的博客系统决定了它要想实现一些诸如评论、统计等需要后台支持的功能时只能依赖第三方服务了。<br>站点的访问量统计，我使用的是”站长统计”，但有时候我们写了博客文章也想更方便的查看每篇文章的阅读量。这时候站长统计就不太方便了，要是能在每篇博文上直观地展现阅读量数据就好了。</p><p>网上搜索了下”hexo 访问统计”绝大部分都是提到了一个叫做”卜算子”的第三方服务，但使用个人的工具总是不那么让我放心，于是一直没有采用还是决定自己动手，鉴于不想自己搭建后端服务(穷，买不起vps…)，还是想找找看有没有更专业点的第三方服务。于是一番搜寻后还真找到个：<a href=https://www.firebase.com target=_blank rel=noopener>firebase</a>。<br>本篇博文即是在firebase的基础上，为hexo博客增加文章阅读量统计，适用于”Next”主题，其他主题可供参考。</p><h4 id=firebase使用><a href=#firebase使用 class=headerlink title=firebase使用></a>firebase使用</h4><ol><li><p>首先需要注册一个firebase账户<br>访问<a href="https://www.firebase.com/" target=_blank rel=noopener>firebase官网</a>，注册账户<br><img src="http://imglf.nosdn0.126.net/img/ODVTOGEyRktTQlJ6Vm5qY3o5S2JJcFdVWjdtSFNjUkY1ZTJOTS9TZVNsSHhKbmZVWElhd0ZRPT0.png?imageView&amp;thumbnail=500x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg%7Cwatermark&amp;type=2&amp;text=wqkgSEVMTE8gV09STETvvIEgLyBqaHNwaWRlci5sb2Z0ZXIuY29t&amp;font=bXN5aA==&amp;gravity=southwest&amp;dissolve=30&amp;fontsize=240&amp;dx=8&amp;dy=10&amp;stripmeta=0"><br>点击右上角”SIGN UP WITH GOOGLE”</p></li><li><p>创建应用<br>注册以后会自动创建一个应用，也可以自己创建一个新的应用<br><img src="http://imglf.nosdn0.126.net/img/ODVTOGEyRktTQlE5YVFRWXMxd1YyZlBWMGVkWXZaem1qd1BQYy9iaElJOExuSXhYYnVlL2tRPT0.png?imageView&amp;thumbnail=500x0&amp;quality=96&amp;stripmeta=0&amp;type=jpg%7Cwatermark&amp;type=2&amp;text=wqkgSEVMTE8gV09STETvvIEgLyBqaHNwaWRlci5sb2Z0ZXIuY29t&amp;font=bXN5aA==&amp;gravity=southwest&amp;dissolve=30&amp;fontsize=240&amp;dx=8&amp;dy=10&amp;stripmeta=0"></p></li><li><p>官网提供了<a href=https://www.firebase.com/docs/web/quickstart.html target=_blank rel=noopener>QuickStart文档</a>，可以看看，也可以直接跟着我下面的步骤操作</p></li><li><p>读写数据API<br>根据官方的文档，写入数据通过<code>set</code>命令，读取数据通过<code>on(value)</code>触发。<code>transaction</code>方法可以在原有基础上修改数据，这个方法正好可以给我们用来统计阅读量。<br>全部的API见<a href="https://www.firebase.com/docs/web/api/" target=_blank rel=noopener>这里</a>,我们只用上述的<code>on</code>和<code>transaction</code>在合适的时候触发更新数据即可。</p></li></ol><div class="post-more-link text-center"><a class=btn href="/2016/04/12/hexo-visit-analytics-md/" rel=contents>阅读全文 &raquo;</a></div></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=//schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href="/2016/03/23/Intermediate-Algorithm-Scripting-2/" itemprop=url>freecodecamp算法题解系列（三）--中级算法（11-21）</a></h1><div class=post-meta><span class=post-time>发表于<time itemprop=dateCreated datetime=2016-03-23T11:19:29+08:00 content=2016-03-23>2016-03-23</time></span> <span class=post-category>&nbsp; | &nbsp; 分类于 <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/技术人生/" itemprop=url rel=index><span itemprop=name>技术人生</span></a></span></span></div></header><div class=post-body><h4 id=Intermediate-Algorithm><a href=#Intermediate-Algorithm class=headerlink title="Intermediate Algorithm"></a>Intermediate Algorithm</h4><p>承接<a href="/2016/03/23/Intermediate-Algorithm-Scripting/">上篇</a>，本篇继续总结freecodecamp中级算法的第11-21题。</p><h6 id=11-Convert-HTML-Entities><a href=#11-Convert-HTML-Entities class=headerlink title="11. Convert HTML Entities"></a>11. <a href=https://www.freecodecamp.com/challenges/convert-html-entities target=_blank rel=noopener>Convert HTML Entities</a></h6><blockquote><p>Convert the characters &amp;, &lt;, &gt;, “ (double quote), and ‘ (apostrophe), in a string to their corresponding HTML entities.<br>将HTML的特殊字符转义</p></blockquote><figure class="highlight js"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line><span class=function><span class=keyword>function</span> <span class=title>convert</span>(<span class=params>str</span>) </span>&#123;</span><br><span class=line>    <span class=comment>// &amp;colon;&amp;rpar;</span></span><br><span class=line>    <span class=keyword>return</span> str.replace(<span class=regexp>/&amp;/g</span>,<span class=string>"&amp;amp;"</span>).replace(<span class=regexp>/&lt;/g</span>,<span class=string>"&amp;lt;"</span>).replace(<span class=regexp>/&gt;/g</span>,<span class=string>"&amp;gt;"</span>).replace(<span class=regexp>/\"/g</span>,<span class=string>"&amp;quot;"</span>).replace(<span class=regexp>/\'/g</span>,<span class=string>"&amp;apos;"</span>);</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>convert(<span class=string>"Hamburgers &lt; Pizza &lt; Tacos"</span>);</span><br></pre></td></tr></table></figure><div class="post-more-link text-center"><a class=btn href="/2016/03/23/Intermediate-Algorithm-Scripting-2/" rel=contents>阅读全文 &raquo;</a></div></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=//schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href="/2016/03/23/Intermediate-Algorithm-Scripting/" itemprop=url>freecodecamp算法题解系列（二）--中级算法（1-10）</a></h1><div class=post-meta><span class=post-time>发表于<time itemprop=dateCreated datetime=2016-03-23T10:34:08+08:00 content=2016-03-23>2016-03-23</time></span> <span class=post-category>&nbsp; | &nbsp; 分类于 <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/技术人生/" itemprop=url rel=index><span itemprop=name>技术人生</span></a></span></span></div></header><div class=post-body><h4 id=Intermediate-Algorithm><a href=#Intermediate-Algorithm class=headerlink title="Intermediate Algorithm"></a>Intermediate Algorithm</h4><p><a href="/2016/02/28/freecodecamp%E7%AE%97%E6%B3%95%E9%A2%98%E8%A7%A3%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89-Basic-Algorithm-Scripting/">戳此处查看前一篇基础算法</a></p><h6 id=1-Sum-All-Numbers-in-a-Range><a href=#1-Sum-All-Numbers-in-a-Range class=headerlink title="1. Sum All Numbers in a Range"></a>1. <a href=https://www.freecodecamp.com/challenges/sum-all-numbers-in-a-range target=_blank rel=noopener>Sum All Numbers in a Range</a></h6><blockquote><p>We’ll pass you an array of two numbers. Return the sum of those two numbers and all numbers between them.<br>The lowest number will not always come first.</p></blockquote><p>求和给定数组约束范围内的所有数字</p><figure class="highlight javascript"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br></pre></td><td class=code><pre><span class=line><span class=function><span class=keyword>function</span> <span class=title>getMaxMin</span>(<span class=params>arr,op</span>)</span>&#123;</span><br><span class=line>  <span class=keyword>if</span>(op === <span class=string>"max"</span>)&#123;</span><br><span class=line>      <span class=keyword>return</span> <span class=built_in>Math</span>.max.apply(<span class=literal>null</span>,arr);</span><br><span class=line>  &#125;<span class=keyword>else</span> &#123;</span><br><span class=line>      <span class=keyword>return</span> <span class=built_in>Math</span>.min.apply(<span class=literal>null</span>,arr);</span><br><span class=line>  &#125;</span><br><span class=line> </span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line><span class=function><span class=keyword>function</span> <span class=title>sumAll</span>(<span class=params>arr</span>) </span>&#123;</span><br><span class=line>  <span class=keyword>var</span> sum = <span class=number>0</span>;</span><br><span class=line>  <span class=keyword>var</span> min = getMaxMin(arr,<span class=string>"min"</span>);</span><br><span class=line>  <span class=keyword>var</span> max = getMaxMin(arr,<span class=string>"max"</span>);</span><br><span class=line>  <span class=keyword>for</span>(<span class=keyword>var</span> i=min;i&lt;=max;i++)&#123;</span><br><span class=line>    sum += i;</span><br><span class=line>  &#125;</span><br><span class=line>  <span class=keyword>return</span> sum;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>sumAll([<span class=number>1</span>, <span class=number>4</span>]);</span><br></pre></td></tr></table></figure><div class="post-more-link text-center"><a class=btn href="/2016/03/23/Intermediate-Algorithm-Scripting/" rel=contents>阅读全文 &raquo;</a></div></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=//schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href="/2016/03/05/jenkins-autobuild/" itemprop=url>使用jenkins构建自动化任务</a></h1><div class=post-meta><span class=post-time>发表于<time itemprop=dateCreated datetime=2016-03-05T15:11:33+08:00 content=2016-03-05>2016-03-05</time></span> <span class=post-category>&nbsp; | &nbsp; 分类于 <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/技术人生/" itemprop=url rel=index><span itemprop=name>技术人生</span></a></span></span></div></header><div class=post-body><div class=post-gallery itemscope itemtype=//schema.org/ImageGallery><div class=post-gallery-row><a class="post-gallery-img fancybox" href=http://www.searchsoa.com.cn/upload/article/2011/2011-07-26-13-40-50.gif rel=gallery_cjnijyzv70031fnpv34mr23vy itemscope itemtype=//schema.org/ImageObject itemprop=url><img src=http://www.searchsoa.com.cn/upload/article/2011/2011-07-26-13-40-50.gif itemprop=contentUrl></a></div></div><h4 id=背景><a href=#背景 class=headerlink title=背景></a>背景</h4><p>jenkins是一个基于Java开发的持续集成工具，通常用于监控持续重复的工作，用于自动化测试领域再合适不过了。<br>本文是我利用jnekins来进行任务分发而做的一篇关于jenkins的学习使用初步入门。<br>通常在进行简单的远程任务调度上，我们可以使用<code>ssh</code>进行远程操作运行命令，但一旦机器增加（多机器调度）或者运行命令复杂（多参数任务）时，<code>ssh</code>就显得不那么方便了：命令写起来麻烦，参数的各种转义也很容易出错，可读性变差。这时候通过jenkins来管理多机器调度就显得很方便了。</p><h4 id=安装><a href=#安装 class=headerlink title=安装></a>安装</h4><h6 id=1-依赖及安装><a href=#1-依赖及安装 class=headerlink title="1. 依赖及安装"></a>1. <a href=https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins target=_blank rel=noopener>依赖及安装</a></h6><p>以下以<code>Red Hat</code>发行版为例，其他安装方式可以戳标题链接查看<br>jenkins依赖Java7及以上版本，可以通过<a href="http://www.java.com/en/download/" target=_blank rel=noopener>java官网</a>安装也可以通过命令行安装<br>以<code>yum</code>安装为例<br><code>sudo yum install java</code></p><p>然后安装jenkins：<br><figure class="highlight sh"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>sudo wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo</span><br><span class=line>sudo rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key</span><br><span class=line>sudo yum install jenkins</span><br></pre></td></tr></table></figure></p><div class="post-more-link text-center"><a class=btn href="/2016/03/05/jenkins-autobuild/" rel=contents>阅读全文 &raquo;</a></div></div><footer class=post-footer><div class=post-eof></div></footer></article><article class="post post-type-normal" itemscope itemtype=//schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href="/2016/03/04/css-learning/" itemprop=url>[转载]史上最全CSS学习资料大全</a></h1><div class=post-meta><span class=post-time>发表于<time itemprop=dateCreated datetime=2016-03-04T19:47:02+08:00 content=2016-03-04>2016-03-04</time></span> <span class=post-category>&nbsp; | &nbsp; 分类于 <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/技术人生/" itemprop=url rel=index><span itemprop=name>技术人生</span></a></span></span></div></header><div class=post-body><div class=post-gallery itemscope itemtype=//schema.org/ImageGallery><div class=post-gallery-row><a class="post-gallery-img fancybox" href=http://img.imooc.com/568c7d4400013a4d19201080.jpg rel=gallery_cjnijyztj0017fnpvdrnuyo7g itemscope itemtype=//schema.org/ImageObject itemprop=url><img src=http://img.imooc.com/568c7d4400013a4d19201080.jpg itemprop=contentUrl></a></div></div><p>本文转载自慕课网，原文<a href=http://www.imooc.com/article/3450 target=_blank rel=noopener>戳此</a></p><h4 id=基础篇><a href=#基础篇 class=headerlink title=基础篇></a>基础篇</h4><ul><li><a href=http://www.imooc.com/article/1437 target=_blank rel=noopener>CSS 最核心的几个概念</a></li><li><a href=http://www.imooc.com/article/1186 target=_blank rel=noopener>CSS 简写指南</a></li><li><a href=http://www.imooc.com/article/2001 target=_blank rel=noopener>CSS样式基础</a></li><li><a href=http://www.imooc.com/article/2067 target=_blank rel=noopener>CSS样式设置</a></li><li><a href=http://www.imooc.com/article/2058 target=_blank rel=noopener>CSS布局模型</a></li><li><a href=http://www.imooc.com/article/2010 target=_blank rel=noopener>CSS文字排版</a></li><li><a href=http://www.imooc.com/article/2475 target=_blank rel=noopener>你不得不知道的CSS 字体那些事儿</a></li><li><a href=http://www.imooc.com/article/2064 target=_blank rel=noopener>CSS中的颜色值和长度值</a></li><li><a href=http://www.imooc.com/article/2004 target=_blank rel=noopener>CSS选择器分类</a></li><li><a href=http://www.imooc.com/article/2787 target=_blank rel=noopener>30个你必须记住的CSS选择符</a></li><li><a href=http://www.imooc.com/article/2031 target=_blank rel=noopener>CSS元素分类</a></li><li><a href=http://www.imooc.com/article/2799 target=_blank rel=noopener>浅谈CSS伪类分类</a></li></ul><div class="post-more-link text-center"><a class=btn href="/2016/03/04/css-learning/" rel=contents>阅读全文 &raquo;</a></div></div><footer class=post-footer><div class=post-eof></div></footer></article></section><nav class=pagination><a class="extend prev" rel=prev href="/page/4/"><i class="fa fa-angle-left"></i></a><a class=page-number href="/">1</a><span class=space>&hellip;</span><a class=page-number href="/page/4/">4</a><span class="page-number current">5</span><a class=page-number href="/page/6/">6</a><span class=space>&hellip;</span><a class=page-number href="/page/8/">8</a><a class="extend next" rel=next href="/page/6/"><i class="fa fa-angle-right"></i></a></nav></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><section class="site-overview sidebar-panel sidebar-panel-active"><div class="site-author motion-element" itemprop=author itemscope itemtype=//schema.org/Person><img class=site-author-image src=/images/default_avatar.jpg alt=但丁 itemprop=image><p class=site-author-name itemprop=name>但丁</p></div><p class="site-description motion-element" itemprop=description>一个伪文青，一个low geek 孤单的坚持码字</p><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/archives><span class=site-state-item-count>80</span> <span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories><span class=site-state-item-count>5</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags><span class=site-state-item-count>130</span> <span class=site-state-item-name>标签</span></a></div></nav><div class="feed-link motion-element"><a href=/rss2.xml rel=alternate><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/zhangjh target=_blank><i class="fa fa-globe"></i> github</a></span> <span class=links-of-author-item><a href=http://weibo.com/jhspider target=_blank><i class="fa fa-globe"></i> weibo</a></span> <span class=links-of-author-item><a href=http://douban.com/people/48165389 target=_blank><i class="fa fa-globe"></i> douban</a></span></div><div class="cc-license motion-element" itemprop=license><a href=//creativecommons.org/licenses/by-nc-sa/4.0 class=cc-opacity target=_blank><img src=/images/cc-by-nc-sa.svg alt="Creative Commons"></a></div><div class="links-of-author motion-element"></div></section></div></aside></main><footer id=footer class=footer><div class=footer-inner><div class=copyright>&copy; 2015 - <span itemprop=copyrightYear>2018</span> <span class=with-love><i class="icon-next-heart fa fa-heart"></i></span> <span class=author itemprop=copyrightHolder>但丁</span></div><div class=powered-by><span id=cnzz_stat_icon_1255577055></span><script src="//s4.cnzz.com/stat.php?id=1255577055&show=pic"></script></div><div class=powered-by>主题 - <a class=theme-link href=javascript:;>NexT.Mist</a></div><div class=powered-by-noline><a href=/issue>网站大事记</a></div><div class=ba-wrapper><div class=ba-info><a target=_blank href="http://www.miitbeian.gov.cn/">浙ICP备16000871-1号</a></div><div class=ba-info><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010802005049"><img src=/images/beian.png> 浙公网安备 33010802005049号</a></div></div><script>
	//将反斜杠替换成下划线,并将中文decode
    var curUrl = decodeURI(window.location.pathname.replace(new RegExp('\\/|\\.', 'g'),"_"));
   
	var statUrl = "https://favlink.cn/visit";

	// 总数
	$.ajax({
		url: statUrl,
		data: {
			url: "sum"
		}
	}).done(function(ret){
		if(ret.cnt > 1){
			if($("#totalCnt").length){
					$("#totalCnt").remove();
			}
			$("span.author").append(" | <span id='totalCnt'>自2016.4.12起总访问量：" + ret.cnt + "次");
		}
	});

	// 明细
	if(curUrl !== "_") {
		$.ajax({
			url: statUrl,
			data: {
				url: curUrl
			}
		}).done(function(ret){
			if(ret.cnt >1){
				$("#detail_cnt").text(ret.cnt);
			}	
		});
	}
</script><br></div></footer><div class=back-to-top></div></div><script type=text/javascript src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type=text/javascript src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type=text/javascript src=/vendors/fancybox/source/jquery.fancybox.pack.js></script><script type=text/javascript src="/js/fancy-box.js?v=1.0.0.0"></script><script type=text/javascript src="/js/helpers.js?v=1.0.0.0"></script><script type=text/javascript src=/vendors/velocity/velocity.min.js></script><script type=text/javascript src=/vendors/velocity/velocity.ui.min.js></script><script type=text/javascript src="/js/motion.js?v=1.0.0.0" id=motion.global></script><script type=text/javascript src=/js/bootstrap.js></script><script src=/js/custom.js></script></body></html>